/*
<doc>
    <summary>
        This function returns the current date/time for the configured Rock Organization timezone.
        This may be different from the current SQL Server time, which is dependent on the database server configuration.
        For example, Azure SQL is configured to operate in the UTC timezone.
        Use this function as a substitute for GETDATE() in circumstances where the Rock Organization time is needed.
    </summary>

    <returns>
        A date/time value representing the current time for the Rock Organization timezone.
    </returns>
    <remarks>
        This code is auto-generated by the Rock application (RockDateTimeHelper.CodeGen_SqlFunction_RockGetDate).
        The named timezone is synchronized with the current 'Time Zone' System Setting at application startup.
    </remarks>
    <code>
        SELECT [dbo].[ROCKGETDATE]()
    </code>
</doc>
*/
ALTER FUNCTION ROCKGETDATE ()
RETURNS datetime
AS
BEGIN
    DECLARE @ReturnValue datetime = SYSDATETIMEOFFSET() AT TIME ZONE 'US Mountain Standard Time'
    RETURN @ReturnValue
END