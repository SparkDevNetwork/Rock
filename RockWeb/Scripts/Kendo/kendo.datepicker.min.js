/*
* Kendo UI Web v2012.3.1114 (http://kendoui.com)
* Copyright 2012 Telerik AD. All rights reserved.
*
* Kendo UI Web commercial licenses may be obtained at
* https://www.kendoui.com/purchase/license-agreement/kendo-ui-web-commercial.aspx
* If you do not own a commercial license, this file shall be governed by the
* GNU General Public License (GPL) version 3.
* For GPL requirements, please review: http://www.gnu.org/copyleft/gpl.html
*/
(function(e,t){function a(t){var a=t.parseFormats;F.normalize(t),a=e.isArray(a)?a:[a],a.splice(0,0,t.format),t.parseFormats=a}function n(e){e.preventDefault()}var o=window.kendo,r=o.ui,i=r.Widget,s=o.parseDate,l=o.keys,u=o.template,d="<div />",c="<span />",p=".kendoDatePicker",f="touchend"+p+" click"+p,m="open",v="close",h="change",_="dateView",k="disabled",w="k-state-default",g="k-state-focused",y="k-state-selected",b="k-state-disabled",C="k-state-hover",V="keydown"+p,x="mouseenter"+p+" mouseleave"+p,D="touchstart"+p+" mousedown"+p,T="id",A="min",I="max",W="month",R="aria-disabled",E="aria-expanded",N="aria-hidden",F=o.calendar,O=F.isInRange,P=F.restrictValue,S=F.isEqualDatePart,H=e.extend,B=e.proxy,z=Date,K=function(t){var a,n=this,i=document.body,s=U.sharedCalendar,l=e(d).attr(N,"true").addClass("k-calendar-container").appendTo(i);s||(s=U.sharedCalendar=new r.Calendar(e(d).attr(T,o.guid()).hide().appendTo(i),{focusOnNav:!1}),F.makeUnselectable(s.element)),n.calendar=s,n.options=t=t||{},a=t.id,a&&(a+="_dateview",l.attr(T,a),n._dateViewID=a),n.popup=new r.Popup(l,H(t.popup,t,{name:"Popup",isRtl:o.support.isRtl(t.anchor)})),n.div=l,n._templates(),n.value(t.value)};K.prototype={_calendar:function(){var e=this,t=e.popup,a=e.options,o=e.calendar,r=o.element;r.data(_)!==e&&(r.appendTo(t.element).data(_,e).off(f+" "+V).on(f,"td:has(.k-link)",B(e._click,e)).on(D,n).show(),o.unbind(h).bind(h,a),o.month=e.month,o.options.dates=a.dates,o.options.depth=a.depth,o.options.culture=a.culture,o._footer(e.footer),o.min(a.min),o.max(a.max),o.navigate(e._value,a.start),e.value(e._value))},destroy:function(){var t,a=this,n=a.calendar,o=n.element;o.data(_)===a&&(t=e(".k-calendar-container"),t.length>1?o.hide().appendTo(document.body):(o.off(p),n.destroy(),U.sharedCalendar=null)),a.popup.destroy()},open:function(){var e=this;e._calendar(),e.popup.open()},close:function(){this.popup.close()},min:function(e){this._option(A,e)},max:function(e){this._option(I,e)},toggle:function(){var e=this;e[e.popup.visible()?v:m]()},move:function(e){var a=this,n=e.keyCode,o=a.calendar,r=e.ctrlKey&&n==l.DOWN||n==l.ENTER;if(n==l.ESC)return a.close(),t;if(e.altKey)return n==l.DOWN?(a.open(),e.preventDefault()):n==l.UP&&(a.close(),e.preventDefault()),t;if(a.popup.visible())return r&&o._cell.hasClass(y)?(a.close(),e.preventDefault(),t):(a._current=o._move(e),t)},value:function(e){var t=this,a=t.calendar,n=t.options;t._value=e,t._current=new z(+P(e,n.min,n.max)),a.element.data(_)===t&&a.value(e)},_click:function(e){-1!==e.currentTarget.className.indexOf(y)&&this.close()},_option:function(e,t){var a=this,n=a.options,o=a.calendar;n[e]=t,o.element.data(_)===a&&o[e](t)},_templates:function(){var e=this,t=e.options,a=t.footer,n=t.month||{},r=n.content,i=n.empty;e.month={content:u('<td#=data.cssClass#><a tabindex="-1" class="k-link" href="\\#" '+o.attr("value")+'="#=data.dateString#" title="#=data.title#">'+(r||"#=data.value#")+"</a></td>",{useWithBlock:!!r}),empty:u("<td>"+(i||"&nbsp;")+"</td>",{useWithBlock:!!i})},a!==!1&&(e.footer=u(a||'#= kendo.toString(data,"D","'+t.culture+'") #',{useWithBlock:!1}))}},K.normalize=a,o.DateView=K;var U=i.extend({init:function(e,t){var n,r=this;i.fn.init.call(r,e,t),e=r.element,t=r.options,a(t),r._wrapper(),r.dateView=new K(H({},t,{id:e.attr(T),anchor:r.wrapper,change:function(){r._change(this.value()),r.close()},close:function(t){r.trigger(v)?t.preventDefault():(e.attr(E,!1),n.attr(N,!0))},open:function(t){var a,o=r.options;r.trigger(m)?t.preventDefault():(a=s(e.val(),o.parseFormats,o.culture),a?(r.dateView._current=a,r.dateView.calendar._focus(a)):r.dateView.value(a),e.attr(E,!0),n.attr(N,!1))}})),n=r.dateView.div,r._icon(),e[0].type="text",e.addClass("k-input").on("keydown"+p,B(r._keydown,r)).on("blur"+p,B(r._blur,r)).on("focus"+p,function(){r._inputWrapper.addClass(g)}).attr({role:"textbox","aria-haspopup":!0,"aria-expanded":!1,"aria-owns":r.dateView._dateViewID}),r._reset(),r._template(),r.enable(!e.is("[disabled]")),r.value(t.value||r.element.val()),o.notify(r)},events:[m,v,h],options:{name:"DatePicker",value:null,footer:"",format:"",culture:"",parseFormats:[],min:new Date(1900,0,1),max:new Date(2099,11,31),start:W,depth:W,animation:{},month:{},dates:[],ARIATemplate:'Current focused date is #=kendo.toString(data.current, "D")#'},setOptions:function(e){var t=this,n=t.dateView,o=n.options;i.fn.setOptions.call(t,e),a(t.options),n.options=H(o,t.options,{change:o.change,close:o.close,open:o.open})},enable:function(e){var t=this,a=t._dateIcon.off(p),o=t._inputWrapper.off(p),r=t.element;e===!1?(o.removeClass(w).addClass(b),r.attr(k,k).attr(R,!0)):(o.addClass(w).removeClass(b).on(x,t._toggleHover),r.removeAttr(k).attr(R,!1),a.on(f,B(t._click,t)).on(D,n))},destroy:function(){var e=this;i.fn.destroy.call(e),e.dateView.destroy(),e.element.off(p),e._dateIcon.off(p),e._inputWrapper.off(p),e._form&&e._form.off("reset",e._resetHandler)},open:function(){this.dateView.open()},close:function(){this.dateView.close()},min:function(e){return this._option(A,e)},max:function(e){return this._option(I,e)},value:function(e){var a=this;return e===t?a._value:(a._old=a._update(e),t)},_toggleHover:function(t){e(t.currentTarget).toggleClass(C,"mouseenter"===t.type)},_blur:function(){var e=this;e.close(),e._change(e.element.val()),e._inputWrapper.removeClass(g)},_click:function(e){var t=this,a=t.element;t.dateView.toggle(),"click"===e.type&&a[0]!==document.activeElement&&a.focus()},_change:function(e){var t=this;e=t._update(e),+t._old!=+e&&(t._old=e,t.trigger(h),t.element.trigger(h))},_keydown:function(e){var t=this,a=t.dateView;a.popup.visible()||e.keyCode!=l.ENTER?(a.move(e),t._updateARIA(a._current)):t._change(t.element.val())},_icon:function(){var t,a=this,n=a.element;t=n.next("span.k-select"),t[0]||(t=e('<span unselectable="on" class="k-select"><span unselectable="on" class="k-icon k-i-calendar">select</span></span>').insertAfter(n)),a._dateIcon=t.attr({role:"button","aria-controls":a.dateView._dateViewID})},_option:function(e,a){var n=this,o=n.options;return a===t?o[e]:(a=s(a,o.parseFormats,o.culture),a&&(o[e]=new z(+a),n.dateView[e](a)),t)},_update:function(e){var t,a=this,n=a.options,r=n.min,i=n.max,l=s(e,n.parseFormats,n.culture);return+l===+a._value?(t=o.toString(l,n.format,n.culture),t!==e&&a.element.val(null===l?e:t),l):(null!==l&&S(l,r)?l=P(l,r,i):O(l,r,i)||(l=null),a._value=l,a.dateView.value(l),a.element.val(l?o.toString(l,n.format,n.culture):e),a._updateARIA(l),l)},_wrapper:function(){var t,a=this,n=a.element;t=n.parents(".k-datepicker"),t[0]||(t=n.wrap(c).parent().addClass("k-picker-wrap k-state-default"),t=t.wrap(c).parent()),t[0].style.cssText=n[0].style.cssText,n.css({width:"100%",height:n[0].style.height}),a.wrapper=t.addClass("k-widget k-datepicker k-header").addClass(n[0].className),a._inputWrapper=e(t[0].firstChild)},_reset:function(){var e=this,t=e.element,a=t.closest("form");a[0]&&(e._resetHandler=function(){e.value(t[0].defaultValue)},e._form=a.on("reset",e._resetHandler))},_template:function(){this._ariaTemplate=u(this.options.ARIATemplate)},_updateARIA:function(e){this.element.attr("aria-label",this._ariaTemplate({current:e}))}});r.plugin(U)})(window.kendo.jQuery);