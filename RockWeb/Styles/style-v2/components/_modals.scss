//
// MODAL STYLES
// --------------------------------------------------


// Imports
// -------------------------

// import as less files so they are concatenated properly

body.modal-open,
.modal-open .navbar-fixed-top,
.modal-open .navbar-fixed-bottom {
  margin-right: 0;
}

.modal {
  left:             50%;
  bottom:           auto;
  right:            auto;
  padding:          0;
  width:            500px;
  margin-left:      -250px;
  background:       var(--color-interface-softest);
  border-radius:    var(--rounded-small);
  box-shadow:       0 3px 9px rgba(0, 0, 0, 0.5);
  background-clip:  padding-box;
}

.modal.container {
  max-width: none;
}

.modal-open {
  overflow:                     hidden;
  -webkit-overflow-scrolling:   auto;
}


/* add a scroll bar to stop page from jerking around */
.modal-open.page-overflow .page-container,
.modal-open.page-overflow .page-container .navbar-fixed-top,
.modal-open.page-overflow .page-container .navbar-fixed-bottom,
.modal-open.page-overflow .modal-scrollable {
  overflow-y:                 scroll;
  -webkit-overflow-scrolling: touch;
}

@media (max-width: 979px) {
	.modal-open.page-overflow .page-container .navbar-fixed-top,
	.modal-open.page-overflow .page-container .navbar-fixed-bottom  {
		overflow-y: visible;
	}
}


.modal-scrollable {
	position: fixed;
	top:      0;
	bottom:   0;
	left:     0;
	right:    0;
	overflow: auto;
}

.modal {
	outline:    none;
	position:   absolute;
	margin-top: 0;
	top:        50%;
	overflow:   visible; /* allow content to popup out (i.e tooltips) */
}

.modal.fade {
	top: -100%;
	-webkit-transition: opacity 0.3s linear, top 0.3s ease-out, bottom 0.3s ease-out, margin-top 0.3s ease-out;
	   -moz-transition: opacity 0.3s linear, top 0.3s ease-out, bottom 0.3s ease-out, margin-top 0.3s ease-out;
	     -o-transition: opacity 0.3s linear, top 0.3s ease-out, bottom 0.3s ease-out, margin-top 0.3s ease-out;
	        transition: opacity 0.3s linear, top 0.3s ease-out, bottom 0.3s ease-out, margin-top 0.3s ease-out;
}

.modal.fade.in {
	top: 50%;
}

.modal-body {
	max-height: none;
	overflow: visible;
}

.modal.modal-absolute {
	position: absolute;
	z-index: 950;
}

.modal .loading-mask {
	position: absolute;
	top:      0;
	bottom:   0;
	left:     0;
	right:    0;
	background: #fff;
	border-radius: 6px;
}

.modal-backdrop.modal-absolute{
	position: absolute;
	z-index:  940;
}

.modal-backdrop,
.modal-backdrop.fade.in{
	opacity:      0.7;
	filter:       alpha(opacity=70);
	background: #fff;
}

.modal.container {
  width:        940px;
  margin-left: -470px;
}

/* Modal Overflow */

.modal-overflow.modal {
	top: 1%;
}

.modal-overflow.modal.fade {
	top: -100%;
}

.modal-overflow.modal.fade.in {
	top: 1%;
}

.modal-overflow .modal-body {
	/*overflow: auto;*/
	-webkit-overflow-scrolling: touch;
}

/* Responsive */

@media (min-width: 1200px) {
	.modal.container {
		width:        1170px;
		margin-left:  -585px;
	}
}

@media (max-width: 979px) {
	.modal,
	.modal.container,
	.modal.modal-overflow 	{
		top:      1%;
		right:    1%;
		left:     1%;
		bottom:   auto;
		width:    auto !important;
		height:   auto !important;
		margin:   0 !important;
		padding:  0 !important;
	}

	.modal.fade.in,
	.modal.container.fade.in,
	.modal.modal-overflow.fade.in {
		top:      1%;
		bottom: auto;
	}

	.modal-body,
	.modal-overflow .modal-body {
		position:   static;
		margin:     0;
		height:     auto !important;
		max-height: none !important;
		overflow:   visible !important;
	}

	.modal-footer,
	.modal-overflow .modal-footer {
		position: static;
	}
}

.loading-spinner {
	position: absolute;
	top: 50%;
	left: 50%;
	margin: -12px 0 0 -12px;
}

/*
Animate.css - http://daneden.me/animate
Licensed under the â˜º license (http://licence.visualidiot.com/)

Copyright (c) 2012 Dan Eden*/

.animated {
	-webkit-animation-duration: 1s;
	   -moz-animation-duration: 1s;
	     -o-animation-duration: 1s;
	        animation-duration: 1s;
	-webkit-animation-fill-mode: both;
	   -moz-animation-fill-mode: both;
	     -o-animation-fill-mode: both;
	        animation-fill-mode: both;
}

@-webkit-keyframes shake {
	0%, 100% {-webkit-transform: translateX(0);}
	10%, 30%, 50%, 70%, 90% {-webkit-transform: translateX(-10px);}
	20%, 40%, 60%, 80% {-webkit-transform: translateX(10px);}
}

@-moz-keyframes shake {
	0%, 100% {-moz-transform: translateX(0);}
	10%, 30%, 50%, 70%, 90% {-moz-transform: translateX(-10px);}
	20%, 40%, 60%, 80% {-moz-transform: translateX(10px);}
}

@-o-keyframes shake {
	0%, 100% {-o-transform: translateX(0);}
	10%, 30%, 50%, 70%, 90% {-o-transform: translateX(-10px);}
	20%, 40%, 60%, 80% {-o-transform: translateX(10px);}
}

@keyframes shake {
	0%, 100% {transform: translateX(0);}
	10%, 30%, 50%, 70%, 90% {transform: translateX(-10px);}
	20%, 40%, 60%, 80% {transform: translateX(10px);}
}

.shake {
	-webkit-animation-name: shake;
      -moz-animation-name: shake;
	      -o-animation-name: shake;
	        animation-name: shake;
}


// Rock modal (page properties, etc.)
// -------------------------

body.rock-modal {
  background: transparent;

  .modal-content {
    border: 0 !important;
    box-shadow: none;
    //background: transparent;
  }
}

.modal-content.rock-modal,
.rock-modal .modal-content {
  background: transparent;
  border:     0;
  box-shadow: $modal-shadow;

  .modal-header {
    min-height:       34px;
    padding:          var(--spacing-small) var(--spacing-large);
    color:            var(--color-interface-softest);
    background-color: var(--color-primary);

    &:before,
    &:after {
      display: table; // 2
      content: " "; // 1
    }

    &:after {
      clear: both;
    }

    h3 {
      margin-right: 12px;
    }

    a {
      color: var(--color-interface-softest);
      text-decoration: underline;
    }

    .close {
      padding:          6px;
      text-decoration:  none;
      color:            var(--color-interface-strongest);
      text-shadow:      none;
    }

    .label {
      margin-top: 8px;
    }

    small {
      display:    block;
      margin-top: var(--spacing-small);
      color:      var(--color-interface-medium) //TODO Darken the ui softest by 10% when color-mix() is avaialable
    }

    @media screen and (min-width: $screen-small) {
      h3 {
        float: left;
      }
    }
  }

  .modal-body {
    padding:          var(--spacing-large);
    color:            var(--color-interface-stronger);
    text-align:       left;
    background-color: var(--color-interface-softest);

    > .scroll-container {
      width: 720px;

      > .viewport {
        width: 670px;
      }
    }

    &.iframe {
      overflow: hidden;
    }
  }

  .modal-footer {
    padding:            var(--spacing-small) var(--spacing-large);
    margin-top:         0;
    color:              var(--color-interface-medium);
    background-color:   var(--color-interface-softer);
    border-radius:      0 0 var(--rounded-small) var(--rounded-small);
  }
}

.rock-modal {

  .modal-footer .btn {
    float:        right;
    margin-left:  5px;
  }
}

.rock-modal-frame {
  border-radius: var(--rounded-large) !important;
}

// Fix for overflow scrolling on iOS
.modal.modal-overflow {
  top:            $grid-gutter-width;
  margin-bottom:  $grid-gutter-width;
}

@supports (-webkit-overflow-scrolling: touch) {
  // CSS specific to iOS devices
  .modal.modal-overflow {
    top: 1%;
    height: calc(100% - 1px) !important;
  }
}

#modal-popup_iframe {
  display:  block;
  width:    100%;
  height:   100%;
  border:     0;
}


// All modals
// -------------------------

// This next section is needed because we're using bootstrap-modal plugin to allow for responsive sized modals. Since they
// hard code the opacity in their CSS we override it here.
.modal-backdrop,
.modal-backdrop.fade.in {
  background: var(--color-interface-strong);
  filter:     alpha(opacity=70);
  opacity:    $modal-backdrop-opacity;
}

// Fixes some appearance issues from switching standard BS modal to
// responsive bootstrap-modal.

.modal-dialog {
  width: auto;
  margin: 0;
}

.modal-content {
  border: none;
}
