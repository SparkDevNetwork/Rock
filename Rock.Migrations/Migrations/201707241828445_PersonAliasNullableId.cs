// <copyright>
// Copyright by the Spark Development Network
//
// Licensed under the Rock Community License (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
// http://www.rockrms.com/license
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
// </copyright>
//
namespace Rock.Migrations
{
    using System;
    using System.Data.Entity.Migrations;
    
    /// <summary>
    ///
    /// </summary>
    public partial class PersonAliasNullableId : Rock.Migrations.RockMigration
    {
        /// <summary>
        /// Operations to be performed during the upgrade process.
        /// </summary>
        public override void Up()
        {
            DropIndex("dbo.PersonAlias", new[] { "AliasPersonId" });
            AddColumn("dbo.GroupType", "ShowMaritalStatus", c => c.Boolean(nullable: false));
            AlterColumn("dbo.PersonAlias", "AliasPersonId", c => c.Int());
            AlterColumn("dbo.PersonAlias", "AliasPersonGuid", c => c.Guid());
            CreateIndex("dbo.PersonAlias", "AliasPersonId", unique: true);

            // NA: Fix Workflow Form Notification system email
            Sql( @"
/* Fix Workflow Form Notification system email by passing 'Command' instead of 'action' to the Workflow Entry block.  */
/* Also pass ActionId so Workflow Entry block can target the exact User Entry Form if given. */
UPDATE SystemEmail
SET [Body] = REPLACE([Body], '&action={{ button.Name }}', '&ActionId={{ Action.Id }}&Command={{ button.Name }}')
WHERE [Guid] = '88C7D1CC-3478-4562-A301-AE7D4D7FFF6D'
    AND ModifiedDateTime IS NULL
" );

            // JE - Typo Fix
            RockMigrationHelper.UpdateEntityAttribute( "Rock.Model.BinaryFile", "7525C4CB-EE6B-41D4-9B64-A08048D5A5C0", "BinaryFileTypeId", "1", "Print For Each", "When a family checks in, should this label be printed once per family, person, or location. Note: this only applies if check-in is configured to use Family check-in vs Individual check-in.", 1, "1", "733944B7-A0D5-41B4-94D4-DE007F72B6F0", "core_LabelType" );

            // Attrib for BlockType: Site Detail:Default File Type           
            RockMigrationHelper.UpdateBlockTypeAttribute( "2AC06C36-869F-45F7-8C14-802781C5F70E", "09EC7F0D-3505-4090-B010-ABA68CB9B904", "Default File Type", "DefaultFileType", "", "The default file type to use when creating new documents.", 0, @"C1142570-8CD6-4A20-83B1-ACB47C1CD377", "35501EDB-8BA6-4FF1-8198-AFAD1CC460A2" );

            // Attrib Value for Block:Site Detail, Attribute:Default File Type Page: Site Detail, Site: Rock RMS  
            RockMigrationHelper.AddBlockAttributeValue( "FC3EBB17-B73E-41C7-8A0D-ACE3FCFDB40A", "35501EDB-8BA6-4FF1-8198-AFAD1CC460A2", @"c1142570-8cd6-4a20-83b1-acb47c1cd377" );

            //Migration for Favicon on Internal Website
            Sql( @"
    INSERT INTO [BinaryFile] 
	    ([IsTemporary] 
	    ,[IsSystem] 
	    ,[BinaryFileTypeId] 
	    ,[FileName] 
	    ,[MimeType] 
	    ,[Description] 
	    ,[StorageEntityTypeId] 
	    ,[Guid]
		,[Path]) 
    VALUES
	    (1 
	    ,0 
	    ,3 
	    ,N'touch-icon-ipad-retina.png' 
	    ,N'image/png' 
	    ,NULL
	    ,51 
	    ,NEWID()
		,'~/GetImage.ashx?guid=90ca7ae9-e9a8-485f-9064-4339442a907d');

DECLARE @InternalFaviconId INT;
SET @InternalFaviconId= SCOPE_IDENTITY() 

INSERT INTO [BinaryFileData] 
	    ([Id] 
	    ,[Content] 
	    ,[Guid]) 
VALUES
	    (@InternalFaviconId
	 ,0x89504E470D0A1A0A0000000D4948445200000090000000900806000000E746E2B800000B63494441547801EDDD55741C471606E07E90262F7EB2222FB36999CCCC6139CC0CCB4C660C9883666687396666666606F190A499E9E9BB7F2DCE7184A3AEAABED375CFF99E13DBFF99EE5B5D75CBF25B15FFA37143680F8FC00098061FC1463802F9500C21201042500CF9700436C247300D06C023D01E1A82E52799FE07CC853C18014BE02290641761098C803CC83501E2A301F486497018C8230EC324E80D0D4C80BCA5213C03CB2106E47131580ECF408E09901E01B80F16431C88A9382C86FBE0061320F9BE0D63E11A5086B90663E1DB2640EE6B07EF800D94E16C7807DA9900D55F47580BE4536BA1A30950DDB586E540BE07B0025A9B00D5EC4B300B1C20CE247060367CC904E8F3B2A00F84818C6A85A10F64990001B4803D40469DEC81167E0E50368C8004505A8C048C806CBF05A829EC007285B11D9AFA25408F4104C80B4A06FD984A86FC9C8AFB36E31EA2083C96C901CA863780B4425022F37E47F183CBC90917D2FFCA4E907DF90895AF9E44A5233A730ED2EB909D6901CA858D403A055FBF8BEC4B87A9C64298CA574EA0E2FEDFE31AA28DD0285302D40C4E02E9147D6F2051D2A6BA947DF120950C6FCD354427A119F700758422209D220BFF44E438944E25CEEDA592013FE41AA222E8C8354037431448A7D0F87BC88997517D2A7E601915F769C2354451B8995B80EEF2C2E6AED251DDC88914911B55BE6632E717EB18DCC525407741427B7B3EF8A7645F394A6E56F49D7EDCB789DCE5F500DDEC896DA5FDBE4B89939BC9F5B2E3149AF218F75FA29BBD1AA02E1005D2AD62CB0292554E798882A37B720E51143A7B2D408DA11848B7B2C5634876250BCF52C9B0569C4354048DBD12A05C3801A45B78F62F899C24A9A8C4D95DE251C93944272057778002B009885DBBEE42C5767FC4B9BD1736414067802603E956FA62074A06AF918E2A5FF13AF78FB0537405E809205EEDBA84721C8A2CFA0BF7103DA13A404D21E2852FEBF1C3AB497B89F67EE203DCB782345515A000EC64DDAE4B28AC7863E5BB3BE710ED80808A00BD04A45BF4C361E4B54A169C118F54CE217A4976807E0EB627DAF5A44D5E2CAC80736EEF6DF8B9AC006579E1F444F0E5DBC8899591972BB6E35DEEA73DB26404A88F27DAF5D22BC4A1B022CE39447DDC0ED097751FFA139BBAC40E4136E53862EF35E7C38B5F733340B3B5B7EB875612B7122BE35821E71AA2056E05A8A5EEB3EAE5EB6710BF4A69EF5FEAC8F52C7E2B3702B44C6BBBFEFE60E25E5829E7DADE2FAB6F803A6A6DD7A73FA9A65DB7E324BBE2C736703DBCD8A93E015AABB55D2F0FC96FB9F72DC67BCABD4ABEE463E59CEB90ABB402D4064807B1592B5972996457EA919DC8FCDF8BCE497E7BFFC98B1C43D4269D00BDADAB5D17FFB0B22B597C510455F96E464ADA62259D5B80DEAD6B801A431248296CCE8AED5F4AB20B8F46F188ACF4FF21B6E33D25ED7DF095DB390528098DEB12A0B140AAE1EC95925F80D0D4C7D59EE8A8A4C48A3A56D63985686C6D0314807C2095C4992B158565815A6D52131BE76517063D703A369D0F81DA04E87E209570D64A492B5DBE765A1D4EB5764F3DD52AADB0C2CEA9BD7FA036015AACB45D1FD34BBC9378F21F2A34E94135C15E3F934B8096D414A01C882B6CD7953C2A1217F6A5FDA810FB9DC971343C5A3D29018DAA0BD0B32A8F1FA35D67F1B25ABE72BC9AF61E2BEF0C42F4ABEA02B44C59BB8E3355F2DBF5B068D719FDFFA62E2FF0F83E76FD656D1540B2617C1CA705BB945FCC3D24BBB002EFF563D315D0A0B200DD012401EF770A0DEF6C0CA6A2DD515980264A6FD7273FACA4ABC1474BF65D636CFF122F1F9B9E5859808E0049A0635D85F5BA1583A96847AF0FD08D32771D960C6D217EFA156DDCFA899A95F377FB938A8ABCDDC7ABBB1573530394072405FF6F4B5ABEDD31988AD63B354023816440FBAB66F3FAEB77938EDD0398E0AAA4BD2F1DDDC36B011A991AA025406ED1BFBF86FFFE250653D196A406E822D776BDECB391FAE7130D6FA3E4C063E2CC4E2F1D9BBEF8DF00E5E89F16A6BF5DD7BF879BE554B4862240ED38B6EB89139B3CB70D223CE31925A748CA96BFEA953F730711A087DD9D1676CCD7E7ACB002EEA7A9684F88000DE4D4AEE3D7CDF3F779556C9CA3A6BD9F709FEE3FEB1011A0E9EE4C0B5B68CE9ABB7C969FC154B41922401FB268D71D0767B7FEC066137AC9C01F2A19FE69E79FD6F938FF50046853FD877B3B66DE8E8E7946FAA7A26D12013AEAF5761D67B5D80E6B0ABE76A79A258DED6F6BF9A82A0274B53E0B68A523BB4A57DCAFB9C45F89F6F8303A802A36CF23B185227E7C93EB30043D53A7A25D11012A05F21B71195D6CEFA712EED6D03B152D3CF7372AFF1E4B458042407E82438CEE3C56CC54B4B0E5BBF0887D3C8E43995CB80F5FD9D6165F0548CC01120B707EA8C4A96DF866D6547E807CF308C3074871C0D04F85BBF2A53FC27CF3121D9EF638F9ADB08748F697FBD23AB4F1BC556C5D447EACE0AB77486FE38F02653A314AC58F85A641FA42E226A04CE79405894171DB3BB4C9858FA93C381511F263E118B9F48FA9D37DF108CB3FE5CF47D80743A46FE71808C49F86E3450C2AF486D4E34E4345801E05CA749179BF25BF15B692C8DE37FE845B9BEA59EC124C165D204EC5E0C85387FF9E8B273F08CFFA05F9A5EC6B27A9A4FFF765FF9DE6C838586836BC6B280D93CE2ECA38DACC63C3FB913519FCDE7315ABCF79CA8F368F04F28194F36B4729A32A11139F6BC4281D2DC315F28034D0BBE13D944F2825730F9345E7D357788EEC8B073E479C9517DB70A31FBF40A5CFB7D53ADE25171C208ECCA100FD03A6F87F5435C792543AAA61C8A65CE660A4FE219BFCDF83CCD16C55F2340C1A97CB0C87D03F685C5801C491194FA3FFAA03E13920FE180CC83AB999EB35E0BFAE2E4037421C883F33A24F021BBE587580F87FD6304342153EBEAA0AD0034086B906BC120F68B874570733285D82020868B8F65B2B735583866BBF85C69004E2C75C162341121AD72540C2BB4060986BC0DF03ABAE016A03C48FB9304F8236E904485807E46BE61AF07560A51BA04E4086D64B8375EB549F0009CB800CADD796EBB202ACFA06A815384086866BC0F5B5F70EB4722340C26C2043D335E017F6E9B8067C0E586E05E82B100632AEBF06BCA738879569ED7D18BEE2668084BE4086C66BC0D74E53F567EA0796DB01CA86BD404665B3A7FB122A13DAFBBD902D2340420BB0810C4DD780A3BD0F4D7D5CE67E9F1660C90A903002C8A8BCBDC7413FCE67DF5F024B768002B013C8D0780D78F145B7AF01DF09011501129A4104A80AA6BD2FB944B20B4175ABBD8F4033B0540548781CC8D07C0DF8BEC56E0C137F1C2CD50112C60319554EC757720D385EDEEBF3FF391E2C5D010AC0262043E335E0A8C8DB7DD29AF30C019D011272E1049051B9F275D3D45C033EE5B1BAFC7F9D805CB074074868E2814B5BCC35E0A2BD1FDDB35697A44013B0BC1220A12B44818CCADB7BFBC27E2537F4D4D0DE47A10B585E0B90700BC4808CCAA7A2D905A7C9292B950A3320ABFAF01A835BC0F26A8084BB3DF9B9C3B0E16EB0BC1E20E12E4FFD1219B194F0B00890708B27DE898C28DC0216B700099DA008480BA3183A81C53540427338056428750A9A83C53D404223B362ADD426680456A60448C836DFCE94180FD960E90F901C8F9B976B29A2F0185842260748686636A5B96A273403CB2F0112B2610424808CB42460046483A52B40BAB530A73DD2B2377503BC9F032464411F7378B156C2D017B2C0621D2009BE04B3CC59FC4A39301BBE0496600254B5D69CA7E64BB0025A83259800D55E479F0FB95A071DC1124C80D2D70EDEF3C9E0CF24BC07EDC0124C80DCD318C665E81CEB7C18973A0DD504489E1BE07E58C2FC6E8F382C81FBE106B0041320B572E039580131269BBB56C0739003965E2640A91A406F9804C7803CE2184C82DED0002C094C8024C8853C18094BE11290649760298C82BCCACF5E9900719603EDE151180433E063D80447201F8A2172DDF08162C88723B0093E861930081E85F69003969FFC135DD933736FAD0C7D0000000049454E44AE426082
	    ,NEWID());
		
UPDATE [Site]
SET
	[FavIconBinaryFileId]=@InternalFaviconId
WHERE
	[Guid]='C2D29296-6A87-47A9-A753-EE4E9159C4C4'" );

            //Migration for Favicon on External Website
            Sql( @"	
INSERT INTO [BinaryFile] 
	    ([IsTemporary] 
	    ,[IsSystem] 
	    ,[BinaryFileTypeId] 
	    ,[FileName] 
	    ,[MimeType] 
	    ,[Description] 
	    ,[StorageEntityTypeId] 
	    ,[Guid]
		,[Path]) 
    VALUES
	    (1 
	    ,0 
	    ,3 
	    ,N'touch-icon-ipad-retina.png' 
	    ,N'image/png' 
	    ,NULL
	    ,51 
	    ,NEWID()
		,'~/GetImage.ashx?guid=5b4e8150-c3e2-4c8d-a854-c3b1982db1da') 
		
		
DECLARE @ExternalFaviconId INT;
SET @ExternalFaviconId = SCOPE_IDENTITY() 

INSERT INTO [BinaryFileData] 
	    ([Id] 
	    ,[Content] 
	    ,[Guid]) 
VALUES
	    (@ExternalFaviconId 
	    ,0x89504E470D0A1A0A0000000D4948445200000090000000900806000000E746E2B800000B63494441547801EDDD55741C471606E07E90262F7EB2222FB36999CCCC6139CC0CCB4C660C9883666687396666666606F190A499E9E9BB7F2DCE7184A3AEAABED375CFF99E13DBFF99EE5B5D75CBF25B15FFA37143680F8FC00098061FC1463802F9500C21201042500CF9700436C247300D06C023D01E1A82E52799FE07CC853C18014BE02290641761098C803CC83501E2A301F486497018C8230EC324E80D0D4C80BCA5213C03CB2106E47131580ECF408E09901E01B80F16431C88A9382C86FBE0061320F9BE0D63E11A5086B90663E1DB2640EE6B07EF800D94E16C7807DA9900D55F47580BE4536BA1A30950DDB586E540BE07B0025A9B00D5EC4B300B1C20CE247060367CC904E8F3B2A00F84818C6A85A10F64990001B4803D40469DEC81167E0E50368C8004505A8C048C806CBF05A829EC007285B11D9AFA25408F4104C80B4A06FD984A86FC9C8AFB36E31EA2083C96C901CA863780B4425022F37E47F183CBC90917D2FFCA4E907DF90895AF9E44A5233A730ED2EB909D6901CA858D403A055FBF8BEC4B87A9C64298CA574EA0E2FEDFE31AA28DD0285302D40C4E02E9147D6F2051D2A6BA947DF120950C6FCD354427A119F700758422209D220BFF44E438944E25CEEDA592013FE41AA222E8C8354037431448A7D0F87BC88997517D2A7E601915F769C2354451B8995B80EEF2C2E6AED251DDC88914911B55BE6632E717EB18DCC525407741427B7B3EF8A7645F394A6E56F49D7EDCB789DCE5F500DDEC896DA5FDBE4B89939BC9F5B2E3149AF218F75FA29BBD1AA02E1005D2AD62CB0292554E798882A37B720E51143A7B2D408DA11848B7B2C5634876250BCF52C9B0569C4354048DBD12A05C3801A45B78F62F899C24A9A8C4D95DE251C93944272057778002B009885DBBEE42C5767FC4B9BD1736414067802603E956FA62074A06AF918E2A5FF13AF78FB0537405E809205EEDBA84721C8A2CFA0BF7103DA13A404D21E2852FEBF1C3AB497B89F67EE203DCB782345515A000EC64DDAE4B28AC7863E5BB3BE710ED80808A00BD04A45BF4C361E4B54A169C118F54CE217A4976807E0EB627DAF5A44D5E2CAC80736EEF6DF8B9AC006579E1F444F0E5DBC8899591972BB6E35DEEA73DB26404A88F27DAF5D22BC4A1B022CE39447DDC0ED097751FFA139BBAC40E4136E53862EF35E7C38B5F733340B3B5B7EB875612B7122BE35821E71AA2056E05A8A5EEB3EAE5EB6710BF4A69EF5FEAC8F52C7E2B3702B44C6BBBFEFE60E25E5829E7DADE2FAB6F803A6A6DD7A73FA9A65DB7E324BBE2C736703DBCD8A93E015AABB55D2F0FC96FB9F72DC67BCABD4ABEE463E59CEB90ABB402D4064807B1592B5972996457EA919DC8FCDF8BCE497E7BFFC98B1C43D4269D00BDADAB5D17FFB0B22B597C510455F96E464ADA62259D5B80DEAD6B801A431248296CCE8AED5F4AB20B8F46F188ACF4FF21B6E33D25ED7DF095DB390528098DEB12A0B140AAE1EC95925F80D0D4C7D59EE8A8A4C48A3A56D63985686C6D0314807C2095C4992B158565815A6D52131BE76517063D703A369D0F81DA04E87E209570D64A492B5DBE765A1D4EB5764F3DD52AADB0C2CEA9BD7FA036015AACB45D1FD34BBC9378F21F2A34E94135C15E3F934B8096D414A01C882B6CD7953C2A1217F6A5FDA810FB9DC971343C5A3D29018DAA0BD0B32A8F1FA35D67F1B25ABE72BC9AF61E2BEF0C42F4ABEA02B44C59BB8E3355F2DBF5B068D719FDFFA62E2FF0F83E76FD656D1540B2617C1CA705BB945FCC3D24BBB002EFF563D315D0A0B200DD012401EF770A0DEF6C0CA6A2DD515980264A6FD7273FACA4ABC1474BF65D636CFF122F1F9B9E5859808E0049A0635D85F5BA1583A96847AF0FD08D32771D960C6D217EFA156DDCFA899A95F377FB938A8ABCDDC7ABBB1573530394072405FF6F4B5ABEDD31988AD63B354023816440FBAB66F3FAEB77938EDD0398E0AAA4BD2F1DDDC36B011A991AA025406ED1BFBF86FFFE250653D196A406E822D776BDECB391FAE7130D6FA3E4C063E2CC4E2F1D9BBEF8DF00E5E89F16A6BF5DD7BF879BE554B4862240ED38B6EB89139B3CB70D223CE31925A748CA96BFEA953F730711A087DD9D1676CCD7E7ACB002EEA7A9684F88000DE4D4AEE3D7CDF3F779556C9CA3A6BD9F709FEE3FEB1011A0E9EE4C0B5B68CE9ABB7C969FC154B41922401FB268D71D0767B7FEC066137AC9C01F2A19FE69E79FD6F938FF50046853FD877B3B66DE8E8E7946FAA7A26D12013AEAF5761D67B5D80E6B0ABE76A79A258DED6F6BF9A82A0274B53E0B68A523BB4A57DCAFB9C45F89F6F8303A802A36CF23B185227E7C93EB30043D53A7A25D11012A05F21B71195D6CEFA712EED6D03B152D3CF7372AFF1E4B458042407E82438CEE3C56CC54B4B0E5BBF0887D3C8E43995CB80F5FD9D6165F0548CC01120B707EA8C4A96DF866D6547E807CF308C3074871C0D04F85BBF2A53FC27CF3121D9EF638F9ADB08748F697FBD23AB4F1BC556C5D447EACE0AB77486FE38F02653A314AC58F85A641FA42E226A04CE79405894171DB3BB4C9858FA93C381511F263E118B9F48FA9D37DF108CB3FE5CF47D80743A46FE71808C49F86E3450C2AF486D4E34E4345801E05CA749179BF25BF15B692C8DE37FE845B9BEA59EC124C165D204EC5E0C85387FF9E8B273F08CFFA05F9A5EC6B27A9A4FFF765FF9DE6C838586836BC6B280D93CE2ECA38DACC63C3FB913519FCDE7315ABCF79CA8F368F04F28194F36B4729A32A11139F6BC4281D2DC315F28034D0BBE13D944F2825730F9345E7D357788EEC8B073E479C9517DB70A31FBF40A5CFB7D53ADE25171C208ECCA100FD03A6F87F5435C792543AAA61C8A65CE660A4FE219BFCDF83CCD16C55F2340C1A97CB0C87D03F685C5801C491194FA3FFAA03E13920FE180CC83AB999EB35E0BFAE2E4037421C883F33A24F021BBE587580F87FD6304342153EBEAA0AD0034086B906BC120F68B874570733285D82020868B8F65B2B735583866BBF85C69004E2C75C162341121AD72540C2BB4060986BC0DF03ABAE016A03C48FB9304F8236E904485807E46BE61AF07560A51BA04E4086D64B8375EB549F0009CB800CADD796EBB202ACFA06A815384086866BC0F5B5F70EB4722340C26C2043D335E017F6E9B8067C0E586E05E82B100632AEBF06BCA738879569ED7D18BEE2668084BE4086C66BC0D74E53F567EA0796DB01CA86BD404665B3A7FB122A13DAFBBD902D2340420BB0810C4DD780A3BD0F4D7D5CE67E9F1660C90A903002C8A8BCBDC7413FCE67DF5F024B768002B013C8D0780D78F145B7AF01DF09011501129A4104A80AA6BD2FB944B20B4175ABBD8F4033B0540548781CC8D07C0DF8BEC56E0C137F1C2CD50112C60319554EC757720D385EDEEBF3FF391E2C5D010AC0262043E335E0A8C8DB7DD29AF30C019D011272E1049051B9F275D3D45C033EE5B1BAFC7F9D805CB074074868E2814B5BCC35E0A2BD1FDDB35697A44013B0BC1220A12B44818CCADB7BFBC27E2537F4D4D0DE47A10B585E0B90700BC4808CCAA7A2D905A7C9292B950A3320ABFAF01A835BC0F26A8084BB3DF9B9C3B0E16EB0BC1E20E12E4FFD1219B194F0B00890708B27DE898C28DC0216B700099DA008480BA3183A81C53540427338056428750A9A83C53D404223B362ADD426680456A60448C836DFCE94180FD960E90F901C8F9B976B29A2F0185842260748686636A5B96A273403CB2F0112B2610424808CB42460046483A52B40BAB530A73DD2B2377503BC9F032464411F7378B156C2D017B2C0621D2009BE04B3CC59FC4A39301BBE0496600254B5D69CA7E64BB0025A83259800D55E479F0FB95A071DC1124C80D2D70EDEF3C9E0CF24BC07EDC0124C80DCD318C665E81CEB7C18973A0DD504489E1BE07E58C2FC6E8F382C81FBE106B0041320B572E039580131269BBB56C0739003965E2640A91A406F9804C7803CE2184C82DED0002C094C8024C8853C18094BE11290649760298C82BCCACF5E9900719603EDE151180433E063D80447201F8A2172DDF08162C88723B0093E861930081E85F69003969FFC135DD933736FAD0C7D0000000049454E44AE426082
	    ,NEWID()) 
		
		
UPDATE [Site]
SET
	[FavIconBinaryFileId]=@ExternalFaviconId
WHERE
	[Guid]='F3F82256-2D66-432B-9D67-3552CD2F4C2B'
" );
        }
        
        /// <summary>
        /// Operations to be performed during the downgrade process.
        /// </summary>
        public override void Down()
        {
            // Attrib for BlockType: Site Detail:Default File Type
            RockMigrationHelper.DeleteAttribute( "35501EDB-8BA6-4FF1-8198-AFAD1CC460A2" );

            DropIndex("dbo.PersonAlias", new[] { "AliasPersonId" });
            AlterColumn("dbo.PersonAlias", "AliasPersonGuid", c => c.Guid(nullable: false));
            AlterColumn("dbo.PersonAlias", "AliasPersonId", c => c.Int(nullable: false));
            DropColumn("dbo.GroupType", "ShowMaritalStatus");
            CreateIndex("dbo.PersonAlias", "AliasPersonId", unique: true);
        }
    }
}
